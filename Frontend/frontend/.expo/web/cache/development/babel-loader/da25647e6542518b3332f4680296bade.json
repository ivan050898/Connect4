{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"G:\\\\PR3\\\\Frontend\\\\frontend\\\\componentes\\\\Tablero.js\";\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Row from \"./Row\";\nimport { connect } from 'react-redux';\nimport { checkAll, checkDraw } from \"./utils/utils.js\";\nimport MiModal from \"./Modal\";\nimport Reloj from \"./reloj\";\nimport { AntDesign } from '@expo/vector-icons';\nimport api from \"./api\";\nimport axios from 'axios';\n\nvar Tablero = function Tablero(_ref) {\n  var Matriz = _ref.Matriz,\n      Jugador = _ref.Jugador,\n      setMatriz = _ref.setMatriz,\n      route = _ref.route,\n      Jugador1 = _ref.Jugador1,\n      Jugador2 = _ref.Jugador2,\n      navigation = _ref.navigation,\n      Id = _ref.Id,\n      Estado = _ref.Estado,\n      Tiempo = _ref.Tiempo,\n      Movimientos = _ref.Movimientos,\n      Resultado = _ref.Resultado;\n  var _route$params = route.params,\n      Jugador1Prop = _route$params.Jugador1Prop,\n      Jugador2Prop = _route$params.Jugador2Prop;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      estadoDummy = _useState2[0],\n      setestadoDummy = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      estadoModal = _useState4[0],\n      setestadoModal = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      TextoModal = _useState6[0],\n      setTextoModal = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isStopwatchStart = _useState8[0],\n      setIsStopwatchStart = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      resetStopwatch = _useState10[0],\n      setResetStopwatch = _useState10[1];\n\n  useEffect(function () {\n    axios.post(api + \"/CrearPartida\", {\n      Jugador1: Jugador1Prop,\n      Jugador2: Jugador2Prop\n    }).then(function (res) {\n      var State = {\n        Matriz: Array.from(Array(6), function (_) {\n          return Array(7).fill(0);\n        }),\n        Jugador: 1,\n        Jugador1: Jugador1Prop,\n        Jugador2: Jugador2Prop,\n        Id: res.data.recordset[0].id,\n        Estado: 0,\n        Tiempo: '',\n        Movimientos: estadoDummy,\n        Resultado: ''\n      };\n      setMatriz(State);\n    }).catch(function (error) {\n      return console.log('Error: ', JSON.stringify(error));\n    });\n  }, []);\n\n  var llenarCelda = function llenarCelda(columna) {\n    for (var fila = 5; fila >= 0; fila--) {\n      if (Matriz[fila][columna] === 0) {\n        Matriz[fila][columna] = Jugador;\n        var State = {\n          Matriz: Matriz,\n          Jugador: Jugador == 1 ? 2 : 1,\n          Jugador1: Jugador1,\n          Jugador2: Jugador2,\n          Id: Id,\n          Estado: Estado,\n          Tiempo: '',\n          Movimientos: estadoDummy,\n          Resultado: ''\n        };\n        setMatriz(State);\n        break;\n      }\n    }\n\n    setestadoDummy(estadoDummy + 1);\n    var checkwin = checkAll(Matriz);\n    var checkdraw = checkDraw(Matriz);\n\n    if (checkwin) {\n      var jugador = checkwin == 1 ? Jugador1 : Jugador2;\n      var _State = {\n        Matriz: Matriz,\n        Jugador: Jugador,\n        Jugador1: Jugador1,\n        Jugador2: Jugador2,\n        Id: Id,\n        Estado: 1,\n        Tiempo: '',\n        Movimientos: estadoDummy,\n        Resultado: jugador\n      };\n      setMatriz(_State);\n      setestadoModal(true);\n      setTextoModal(\"\\xA1El jugador: \" + jugador + \" ha ganado!\");\n    } else if (checkdraw) {\n      var _State2 = {\n        Matriz: Matriz,\n        Jugador: Jugador,\n        Jugador1: Jugador1,\n        Jugador2: Jugador2,\n        Id: Id,\n        Estado: 1,\n        Tiempo: '',\n        Movimientos: estadoDummy,\n        Resultado: ''\n      };\n      setMatriz(_State2);\n      setestadoModal(true);\n      setTextoModal(\"Los jugadores han empatado!\");\n    } else {\n      return;\n    }\n  };\n\n  var printtiempo = function printtiempo(tiempo) {\n    if (Estado === 1 && tiempo !== '00:00:00') {\n      setIsStopwatchStart(false);\n      setResetStopwatch(true);\n      axios.post(api + \"/EditarPartida\", {\n        id: Id,\n        resultado: Resultado,\n        duracion: tiempo,\n        movimientos: estadoDummy\n      }).then(function (res) {\n        console.log(res.data);\n      }).catch(function (error) {\n        return console.log('Error: ', JSON.stringify(error));\n      });\n    }\n  };\n\n  if (Matriz.length > 0) {\n    return React.createElement(Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, estadoModal && React.createElement(MiModal, {\n      Estado: estadoModal,\n      Texto: TextoModal,\n      Navigation: navigation,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 31\n      }\n    }), React.createElement(View, {\n      style: styles.Timer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: styles.Textojugadores,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 19\n      }\n    }, \"   Tiempo:  \"), React.createElement(Reloj, {\n      resetStopwatch: resetStopwatch,\n      isStopwatchStart: isStopwatchStart,\n      getTime: printtiempo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    })), React.createElement(View, {\n      style: styles.jugadores,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: styles.FichaRoja,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }), React.createElement(Text, {\n      style: styles.Textojugadores,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, Jugador1), estadoDummy % 2 === 0 && React.createElement(AntDesign, {\n      name: \"caretleft\",\n      size: 24,\n      color: \"black\",\n      style: {\n        \"marginTop\": 6,\n        \"marginLeft\": 6\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 40\n      }\n    })), React.createElement(View, {\n      style: styles.jugadores,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: styles.FichaAmarilla,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }), React.createElement(Text, {\n      style: styles.Textojugadores,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    }, Jugador2), estadoDummy % 2 !== 0 && React.createElement(AntDesign, {\n      name: \"caretleft\",\n      size: 24,\n      color: \"black\",\n      style: {\n        \"marginTop\": 6,\n        \"marginLeft\": 6\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 41\n      }\n    })), React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: styles.Botonera,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, new Array(7).fill(0).map(function (_, i) {\n      return React.createElement(TouchableOpacity, {\n        style: styles.touchable,\n        key: i,\n        onPress: function onPress() {\n          return llenarCelda(i);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }\n      });\n    })), new Array(6).fill(0).map(function (_, i) {\n      return React.createElement(Row, {\n        fila: i,\n        key: i,\n        estado: estadoDummy,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 19\n        }\n      });\n    })));\n  } else {\n    return React.createElement(Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#00ff00\",\n      style: {\n        \"flex\": 1,\n        \"alignContent\": 'center',\n        \"alignItems\": \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }));\n  }\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\"\n  },\n  touchable: {\n    alignItems: \"center\",\n    width: 55,\n    height: 50\n  },\n  Botonera: {\n    flexDirection: \"row\",\n    paddingLeft: 4,\n    paddingTop: 0\n  },\n  jugadores: {\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    paddingTop: 20\n  },\n  Timer: {\n    backgroundColor: \"white\",\n    flexDirection: \"row\"\n  },\n  Textojugadores: {\n    fontSize: 25\n  },\n  FichaRoja: {\n    width: 25,\n    height: 25,\n    borderRadius: 25 / 2,\n    alignItems: \"center\",\n    alignContent: \"center\",\n    backgroundColor: \"red\",\n    marginTop: 4,\n    marginRight: 15,\n    marginLeft: 15\n  },\n  FichaAmarilla: {\n    width: 25,\n    height: 25,\n    borderRadius: 25 / 2,\n    alignItems: \"center\",\n    alignContent: \"center\",\n    backgroundColor: \"yellow\",\n    marginTop: 4,\n    marginRight: 15,\n    marginLeft: 15,\n    marginBottom: 35\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    Matriz: state.Matriz,\n    Jugador: state.Jugador,\n    Jugador1: state.Jugador1,\n    Jugador2: state.Jugador2,\n    Id: state.Id,\n    Estado: state.Estado,\n    Tiempo: state.Tiempo,\n    Movimientos: state.Movimientos,\n    Resultado: state.Resultado\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setMatriz: function setMatriz(state) {\n      return dispatch({\n        type: 'SetMatrizRedux',\n        payload: state\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tablero);","map":{"version":3,"sources":["G:/PR3/Frontend/frontend/componentes/Tablero.js"],"names":["React","Fragment","useState","useEffect","Row","connect","checkAll","checkDraw","MiModal","Reloj","AntDesign","api","axios","Tablero","Matriz","Jugador","setMatriz","route","Jugador1","Jugador2","navigation","Id","Estado","Tiempo","Movimientos","Resultado","params","Jugador1Prop","Jugador2Prop","estadoDummy","setestadoDummy","estadoModal","setestadoModal","TextoModal","setTextoModal","isStopwatchStart","setIsStopwatchStart","resetStopwatch","setResetStopwatch","post","then","res","State","Array","from","_","fill","data","recordset","id","catch","error","console","log","JSON","stringify","llenarCelda","columna","fila","checkwin","checkdraw","jugador","printtiempo","tiempo","resultado","duracion","movimientos","length","styles","Timer","Textojugadores","jugadores","FichaRoja","FichaAmarilla","container","Botonera","map","i","touchable","StyleSheet","create","flex","backgroundColor","alignItems","width","height","flexDirection","paddingLeft","paddingTop","fontSize","borderRadius","alignContent","marginTop","marginRight","marginLeft","marginBottom","mapStateToProps","state","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Fragment,useState,useEffect } from 'react';\r\nimport { StyleSheet, View,ActivityIndicator,TouchableOpacity,Text } from 'react-native';\r\nimport Row from './Row';\r\nimport { connect } from 'react-redux';\r\nimport { checkAll,checkDraw } from './utils/utils.js';\r\nimport MiModal from './Modal';\r\nimport Reloj from './reloj';\r\nimport { AntDesign } from '@expo/vector-icons'; \r\nimport api from './api';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nconst Tablero = ({Matriz,Jugador,setMatriz,route,Jugador1,Jugador2,navigation,Id,Estado,Tiempo,Movimientos,Resultado}) => {\r\n      const { Jugador1Prop, Jugador2Prop } = route.params;\r\n      const [estadoDummy, setestadoDummy] = useState(0)\r\n      const [estadoModal, setestadoModal] = useState(false)\r\n      const [TextoModal, setTextoModal] = useState('')\r\n      const [isStopwatchStart, setIsStopwatchStart] = useState(true);\r\n      const [resetStopwatch, setResetStopwatch] = useState(false);\r\n      useEffect(() => {\r\n        axios.post(`${api}/CrearPartida`,{\r\n          Jugador1:Jugador1Prop,\r\n          Jugador2:Jugador2Prop,\r\n        })\r\n        .then( res => {\r\n          const State ={\r\n            Matriz:Array.from(Array(6), _ => Array(7).fill(0)),\r\n            Jugador:1,\r\n            Jugador1:Jugador1Prop,\r\n            Jugador2:Jugador2Prop,\r\n            Id:res.data.recordset[0].id,\r\n            Estado:0,\r\n            Tiempo:'',\r\n            Movimientos:estadoDummy,\r\n            Resultado:''\r\n\r\n          } \r\n          setMatriz(State);\r\n        })\r\n        .catch( (error) => console.log('Error: ',JSON.stringify(error)));\r\n        \r\n      }, [])\r\n\r\n      \r\n      const llenarCelda = (columna) => {\r\n        for (let fila = 5; fila >= 0; fila--) {\r\n            if (Matriz[fila][columna]===0) {\r\n              Matriz[fila][columna] = Jugador;\r\n                const State ={\r\n                    Matriz:Matriz,\r\n                    Jugador:Jugador==1? 2:1,\r\n                    Jugador1:Jugador1,\r\n                    Jugador2:Jugador2,\r\n                    Id:Id,\r\n                    Estado:Estado,\r\n                    Tiempo:'',\r\n                    Movimientos:estadoDummy,\r\n                    Resultado:''\r\n                }\r\n                setMatriz(State);\r\n              break;\r\n            }\r\n        }\r\n        setestadoDummy(estadoDummy+1);\r\n        const checkwin=checkAll(Matriz)\r\n        const checkdraw= checkDraw(Matriz);\r\n        if(checkwin){\r\n          let jugador=checkwin==1? Jugador1:Jugador2\r\n          const State ={\r\n            Matriz:Matriz,\r\n            Jugador:Jugador,\r\n            Jugador1:Jugador1,\r\n            Jugador2:Jugador2,\r\n            Id:Id,\r\n            Estado:1,\r\n            Tiempo:'',\r\n            Movimientos:estadoDummy,\r\n            Resultado:jugador\r\n          }\r\n          setMatriz(State);\r\n          setestadoModal(true)\r\n          setTextoModal(`¡El jugador: ${ jugador } ha ganado!`)\r\n        }else if(checkdraw){\r\n          const State ={\r\n            Matriz:Matriz,\r\n            Jugador:Jugador,\r\n            Jugador1:Jugador1,\r\n            Jugador2:Jugador2,\r\n            Id:Id,\r\n            Estado:1,\r\n            Tiempo:'',\r\n            Movimientos:estadoDummy,\r\n            Resultado:''\r\n          }\r\n          setMatriz(State);\r\n          setestadoModal(true)\r\n          setTextoModal(`Los jugadores han empatado!`)\r\n\r\n        }else{\r\n           return;\r\n        }\r\n      }\r\n\r\n      const printtiempo = (tiempo) =>{\r\n        if(Estado===1 && tiempo!=='00:00:00'){\r\n          setIsStopwatchStart(false)\r\n          setResetStopwatch(true)\r\n          axios.post(`${api}/EditarPartida`,{\r\n            id:Id,\r\n            resultado:Resultado,\r\n            duracion:tiempo,\r\n            movimientos:estadoDummy\r\n          })\r\n          .then( res => {\r\n              console.log(res.data)\r\n          })\r\n          .catch( (error) => console.log('Error: ',JSON.stringify(error)));\r\n        }\r\n      }\r\n      \r\n\r\n    if (Matriz.length>0){\r\n        return (\r\n            <Fragment>\r\n              {estadoModal && <MiModal Estado={estadoModal} Texto={TextoModal} Navigation={navigation}></MiModal>}\r\n              <View style={styles.Timer}>\r\n                  <Text style={styles.Textojugadores}>   Tiempo:  </Text>\r\n                  <Reloj resetStopwatch={resetStopwatch} isStopwatchStart={isStopwatchStart} getTime={printtiempo} ></Reloj>\r\n              </View>\r\n              <View style={styles.jugadores}>\r\n                  <View style={styles.FichaRoja}></View>\r\n                  <Text style={styles.Textojugadores}>{Jugador1}</Text>\r\n                 {estadoDummy%2===0 && <AntDesign name=\"caretleft\" size={24} color=\"black\" style={{\"marginTop\":6,\"marginLeft\":6}} />}\r\n              </View>\r\n              <View style={styles.jugadores}>\r\n                  <View style={styles.FichaAmarilla}></View>\r\n                  <Text style={styles.Textojugadores}>{Jugador2}</Text>\r\n                  {estadoDummy%2!==0 && <AntDesign name=\"caretleft\" size={24} color=\"black\" style={{\"marginTop\":6,\"marginLeft\":6}} />}\r\n\r\n              </View>\r\n\r\n              <View style={styles.container}>\r\n                <View style={styles.Botonera} >\r\n                    {new Array(7).fill(0).map((_, i) => (\r\n                        <TouchableOpacity style={styles.touchable}  key={i} onPress={()=> llenarCelda(i)}/>\r\n                    ))}   \r\n                 </View>\r\n                {new Array(6).fill(0).map((_, i) => (\r\n                  <Row fila={i} key={i} estado={estadoDummy}></Row>\r\n\r\n                ))} \r\n              </View>\r\n            </Fragment>\r\n            \r\n            \r\n          );\r\n\r\n    }else{\r\n        return(\r\n            <Fragment>\r\n                <ActivityIndicator size=\"large\" color=\"#00ff00\" style={{\"flex\":1,\"alignContent\":'center',\"alignItems\":\"center\"}}/>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n  }\r\n  \r\nconst styles = StyleSheet.create({\r\n    container:{\r\n     flex:1,\r\n     backgroundColor:\"white\",\r\n    },touchable:{\r\n      alignItems: \"center\",\r\n      width:55,\r\n      height:50\r\n    },Botonera:{\r\n      flexDirection:\"row\",\r\n      paddingLeft:4,\r\n      paddingTop:0\r\n    },jugadores:{\r\n      flexDirection:\"row\",\r\n      backgroundColor:\"white\",\r\n      paddingTop:20\r\n    },Timer:{\r\n      backgroundColor:\"white\",   \r\n      flexDirection:\"row\",\r\n\r\n    },Textojugadores:{\r\n      fontSize:25\r\n    },FichaRoja:{\r\n      width: 25,\r\n      height: 25,\r\n      borderRadius: 25 / 2,\r\n      alignItems:\"center\",\r\n      alignContent:\"center\",\r\n      backgroundColor:\"red\",\r\n      marginTop:4,\r\n      marginRight:15,\r\n      marginLeft:15\r\n    },FichaAmarilla:{\r\n      width: 25,\r\n      height: 25,\r\n      borderRadius: 25 / 2,\r\n      alignItems:\"center\",\r\n      alignContent:\"center\",\r\n      backgroundColor:\"yellow\",\r\n      marginTop:4,\r\n      marginRight:15,\r\n      marginLeft:15,\r\n      marginBottom:35\r\n    }  \r\n });\r\n\r\n const mapStateToProps = state =>{\r\n   return {\r\n     Matriz:state.Matriz,\r\n     Jugador:state.Jugador,\r\n     Jugador1:state.Jugador1,\r\n     Jugador2:state.Jugador2,\r\n     Id:state.Id,\r\n     Estado:state.Estado,\r\n     Tiempo:state.Tiempo,\r\n     Movimientos:state.Movimientos,\r\n     Resultado:state.Resultado\r\n\r\n   }\r\n }\r\n\r\n const mapDispatchToProps = (dispatch) =>{\r\n  return {\r\n    setMatriz: (state)=> dispatch({ type: 'SetMatrizRedux',payload:state })\r\n\r\n  }  \r\n\r\n}\r\n\r\n \r\n export default connect(mapStateToProps,mapDispatchToProps)(Tablero);"]},"metadata":{},"sourceType":"module"}